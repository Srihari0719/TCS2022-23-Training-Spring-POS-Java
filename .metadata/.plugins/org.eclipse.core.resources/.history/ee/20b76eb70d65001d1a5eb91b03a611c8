/**
 * 
 */
package com.tcs.client;

import java.time.LocalDate;
import java.time.LocalTime;
/**
 * @author Administrator
 *
 */
import java.util.*;

import com.tcs.bean.*;
import com.tcs.bean.Login;
import com.tcs.bean.Payment;
import com.tcs.bean.Professor;
import com.tcs.service.*;

public class CRSApplication {

	/**
	 * @param args
	 */
	
	public static void main(String[] args) {
		try (Scanner sys = new Scanner(System.in)) {
			AdminServiceInterface asi = new AdminServiceImp();
			StudentServiceInterface ssi = new StudentServiceImp();
			ProfessorServiceInterface psi = new ProfessorServiceImp();
			UserServiceInterface usi = new UserServiceImp();
			Admin ad = new Admin();
			Login l = new Login();
			Payment p = new Payment();
			Professor pr = new Professor();
			SemesterRegistration sr = new SemesterRegistration();
			Student st = new Student();
			GradeCard gc = new GradeCard();
			
			l.put();
			p.put();
			pr.put();
			sr.putMethod();
			st.putMethod();
			gc.put();
			
			boolean a = true;
			while(a) {
				System.out.println("Welcome to the CRS Application - " + LocalDate.now() + " " + LocalTime.now());
				System.out.println("-----Main Menu----");
				System.out.println("1.Login");
				System.out.println("2.Student Registration");
				System.out.println("3.Update Password");
				System.out.println("4.Exit");
				System.out.println("Choose your option: ");
				try {
				int n =sys.nextInt();sys.nextLine();
				switch(n) {
				case 1: System.out.println("Enter Username: ");
						String username = sys.nextLine();
						System.out.println("Enter Password: ");
						String password = sys.nextLine();
						System.out.println("Enter Role: ");
						String role = sys.nextLine();
						usi.userLogin(username, password, role);
						break;
				case 2: System.out.println("Enter Username :");
						String studentUsername = sys.nextLine();
						System.out.println("Enter Password :");
						String studentPassword = sys.nextLine();
						System.out.println("Approval pending at Admin.");
						ad.approvalList(studentUsername, studentPassword);
						break;
				case 3: System.out.println("Enter Username: ");
						String user = sys.nextLine();
						System.out.println("Enter Old Password: ");
						String pass = sys.nextLine();
						System.out.println("Enter New Password : ");
						String newPass = sys.nextLine();
						System.out.println("Enter Role: ");
						String roleU = sys.nextLine();
						if(roleU.equalsIgnoreCase("admin") && l.verifyAdminCredentials(new Login (user,pass))) {
							l.updateAdminPassword(user, newPass);
						}
						else if(roleU.equalsIgnoreCase("professor") && l.verifyProfessorCredentials(new Login (user,pass))) {
							l.updateProfessorPassword(user, newPass);
						}
						else if(roleU.equalsIgnoreCase("student") && l.verifyStudentCredentials(new Login (user,pass))) {
							l.updateStudentPassword(user, newPass);
						}
						else
							throw new NullPointerException("Unsuccessful.");
						break;
				case 4: a=false;
						break;
				default:throw new NullPointerException("----Invalid Choice----");
				}
				}
				catch(Exception e) {
					System.out.println(e.getMessage());
					sys.nextLine();
					continue;
				}
			}
		}
	}

}
